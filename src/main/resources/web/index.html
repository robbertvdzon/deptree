<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <style>
        body {
            margin: 0;
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>

<body>
test:<a href="/customers/1">link</a>
<script>

    $.ajax("/rest/graph", {
        success: function(data) {
            load();
        },
        error: function() {
        }
    });

    var svg = createSvg();


    function load() {

        defineArrow();
        addCircle(100, "180", "rif.pom");
        addCircle(240, "180", "rif.integratietests");
        addCircle(100, "300", "rifsync.product");
        addCircle(240, "300", "rif.product");
        addCircle(100, "420", "rif.opslag");
        addCircle(100, "540", "rif.sync");
        addCircle(240, "540", "rif.domein");
        addLine(240, "180", "240", "540");
        addLine(240, "180", "100", "180");
        addLine(240, "180", "100", "540");
        addLine(240, "180", "100", "300");
        addLine(240, "180", "240", "300");
        addLine(100, "300", "100", "420");
        addLine(100, "300", "100", "180");
        addLine(100, "300", "100", "540");
        addLine(240, "300", "100", "180");
        addLine(240, "300", "100", "420");
        addLine(100, "420", "240", "540");
        addLine(100, "420", "100", "180");
        addLine(100, "420", "100", "540");
        addLine(100, "540", "240", "540");
        addLine(100, "540", "100", "180");
        addLine(240, "540", "100", "180");

    }

    function createSvg() {
        return d3
            .select("body")
            .call(d3.zoom().on("zoom", function() {
                svg.attr("transform", d3.event.transform)
            }))
            .append("svg")
            .attr("width", "100%")
            .attr("height", "100%")
            .append("g")
    }

    function defineArrow() {
        svg.append("svg:defs").append("svg:marker")
            .attr("id", "triangle")
            .attr("refX", 6)
            .attr("refY", 6)
            .attr("markerWidth", 30)
            .attr("markerHeight", 30)
            .attr("orient", "auto")
            .append("path")
            .attr("d", "M 0 0 12 6 0 12 3 6")
            .style("fill", "black");
    }

    function addCircle(x, y, text) {
        svg.append("circle")
            .attr("cx", x)
            .attr("cy", y)
            .attr("r", 50)
            .style("fill", "#B8DEE6");

        svg.append("text")
            .attr("x", x)
            .attr("y", y)
            .text(text);
    }

    function addLine(x1, y1, x2, y2) {
        svg.append("line")
            .attr("x1", x1)
            .attr("y1", y1)
            .attr("x2", x2)
            .attr("y2", y2)
            .attr("stroke-width", 1)
            .attr("stroke", "black")
            .attr("marker-end", "url(#triangle)");
    }

</script>

</body>